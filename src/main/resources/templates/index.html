<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>한번 찍어보자구</title>
<link href="https://unpkg.com/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/jquery@3.6.1/dist/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.0/axios.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
	$(function() {
		$("#btn1").click(function() {
			// alert("콜성공!!!");
			var startDay = $("input[name='startDay']").val();
			var endDay = $("input[name='endDay']").val();
			var stNoList = new Array();
			$("input[name='day-stNo']:checked").each(function(i) {
				stNoList.push($(this).val());
			});
			$.ajax({
				url : "./period/utime",
				type : 'GET',
				data : {
					s : startDay,
					e : endDay,
					st : stNoList
				},
				success : function(data) {
					$("#info").empty();
					var total = 0;
					$.each(data, function(index, item) {
						$("#info").append(index + 1 + ". ");
						if (item.stNm === "suwon") {
							$("#info").append("수원점 : ");
						} else if (item.stNm === "yongin") {
							$("#info").append("용인점 : ");
						} else if (item.stNm === "yeouido") {
							$("#info").append("여의도점 : ");
						}
						$("#info").append(item.time + "시 : ");
						$("#info").append(item.sum + "원</br>");
						total += item.sum;
					});
					$("#info").append("합계 : " + total + "원");
				},
				error : function() {
					alert("error");
				}
			});
		});
		$("#btn2").click(function() {
			// alert("콜성공!!!");
			var startMonth = $("input[name='startMonth']").val();
			var endMonth = $("input[name='endMonth']").val();
			var stNoList = new Array();
			$("input[name='month-stNo']:checked").each(function(i) {
				stNoList.push($(this).val());
			});
			$.ajax({
				url : "./period/utime",
				type : 'GET',
				data : {
					s : startMonth,
					e : endMonth,
					st : stNoList
				},
				success : function(data) {
					$("#info").empty();
					var total = 0;
					$.each(data, function(index, item) {
						$("#info").append(index + 1 + ". ");
						if (item.stNm === "suwon") {
							$("#info").append("수원점 : ");
						} else if (item.stNm === "yongin") {
							$("#info").append("용인점 : ");
						} else if (item.stNm === "yeouido") {
							$("#info").append("여의도점 : ");
						}
						$("#info").append(item.time + "시 : ");
						$("#info").append(item.sum + "원</br>");
						total += item.sum;
					});
					$("#info").append("합계 : " + total + "원");
				},
				error : function() {
					alert("error");
				}
			});
		});
		$("#btn3").click(function() {
			// alert("콜성공!!!");
			var startYear = $("input[name='startYear']").val();
			var endYear = $("input[name='endYear']").val();
			var stNoList = new Array();
			$("input[name='year-stNo']:checked").each(function(i) {
				stNoList.push($(this).val());
			});
			$.ajax({
				url : "./period/utime",
				type : 'GET',
				data : {
					s : startYear,
					e : endYear,
					st : stNoList
				},
				success : function(data) {
					$("#info").empty();
					var total = 0;
					$.each(data, function(index, item) {
						$("#info").append(index + 1 + ". ");
						if (item.stNm === "suwon") {
							$("#info").append("수원점 : ");
						} else if (item.stNm === "yongin") {
							$("#info").append("용인점 : ");
						} else if (item.stNm === "yeouido") {
							$("#info").append("여의도점 : ");
						}
						$("#info").append(item.time + "시 : ");
						$("#info").append(item.sum + "원</br>");
						total += item.sum;
					});
					$("#info").append("합계 : " + total + "원");
				},
				error : function() {
					alert("error");
				}
			});
		});

		/* document.getElementById('startDay').value=new Date().toISOString().slice(0,10); 
			document.getElementById('endDay').value=new Date().toISOString().slice(0,10); */
	});
</script>
</head>
<body>
	<h1>안녕하세요</h1>
	<h2>서버시간 : [[${serverTime}]]</h2>
	<hr />
	<input type="date" id="startDay" name="startDay" value="2020-03-05" />
	<input type="date" id="endDay" name="endDay" value="2020-03-10" />
	<br />
	<input type="checkbox" id="day-stNo1001" name="day-stNo" value="1001"> 여의도
	<input type="checkbox" id="day-stNo2001" name="day-stNo" value="2001"> 수원
	<input type="checkbox" id="day-stNo2002" name="day-stNo" value="2002"> 용인
	<br />
	<br />
	<button id="btn1">시간대별(일) 호출</button>
	<hr />
	<input type="month" id="startMonth" name="startMonth" value="2020-03" />
	<input type="month" id="endMonth" name="endMonth" value="2020-04" />
	<br />
	<input type="checkbox" id="month-stNo1001" name="month-stNo" value="1001"> 여의도
	<input type="checkbox" id="month-stNo2001" name="month-stNo" value="2001"> 수원
	<input type="checkbox" id="month-stNo2002" name="month-stNo" value="2002"> 용인
	<br />
	<br />
	<button id="btn2">시간대별(월) 호출</button>
	<hr />
	<input type="text" id="startYear" name="startYear" value="2020" />
	<input type="text" id="endYear" name="endYear" value="2020" />
	<br />
	<input type="checkbox" id="year-stNo1001" name="year-stNo" value="1001"> 여의도
	<input type="checkbox" id="year-stNo2001" name="year-stNo" value="2001"> 수원
	<input type="checkbox" id="year-stNo2002" name="year-stNo" value="2002"> 용인
	<br />
	<br />
	<button id="btn3">시간대별(년) 호출</button>
	<hr />
	<hr />
	<div id="info"></div>
	<hr />

</body>
</html>