<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>한번 찍어보자구</title>
<link href="https://unpkg.com/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/jquery@3.6.1/dist/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.0/axios.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
	$(function() {
		$("#btn1")
				.click(
						function() {
							// alert("콜성공!!!");
							var startDay = $("input[name='startDay']").val();
							var endDay = $("input[name='endDay']").val();
							var stNoList = new Array();
							$("input[name='day-stNo']:checked").each(
									function(i) {
										stNoList.push($(this).val());
									});
							$
									.ajax({
										url : "./period/utime",
										type : 'GET',
										data : {
											s : startDay,
											e : endDay,
											st : stNoList
										},
										success : function(data) {
											alert(data[0].sumByTimes[0].sum);
											alert(stNoList.length);
											google.charts.load('current',
													{
														packages : [
																'corechart',
																'bar' ]
													});
											google.charts
													.setOnLoadCallback(drawColColors);

											function drawColColors() {
												var dataTable = new google.visualization.DataTable();
												dataTable.addColumn('string',
														'Time of Day');
											for(var i=0;i<stNoList.length;i++){
												switch (stNoList[i]){
												case "1001":
												dataTable.addColumn('number','여의도점');			
												break;
												case "2001":
												dataTable.addColumn('number','수원점');			
												break;
												case "2002":
												dataTable.addColumn('number','용인점');			
												break;
												}
											}

												dataTable.addRows([
														[ '09', 1.5, 3.5 ] ]);
												dataTable.addRows([
														[ '10', 1.5, 2.5 ] ]);

												var options = {
													title : 'Motivation and Energy Level Throughout the Day',
													colors : [ '#9575cd',
															'#33ac71' ],
													hAxis : {
														title : 'Time of Days'
													},
													vAxis : {
														title : 'Rating (scale of 1-10)'
													}
												};

												var chart = new google.visualization.ColumnChart(
														document
																.getElementById('chart_div'));
												chart.draw(dataTable, options);
											}
										},
										error : function() {
											alert("error");
										}
									});
						});

		/* document.getElementById('startDay').value=new Date().toISOString().slice(0,10); 
			document.getElementById('endDay').value=new Date().toISOString().slice(0,10); */
	});
</script>
</head>
<body>
	<h1>안녕하세요</h1>
	<h2>서버시간 : [[${serverTime}]]</h2>
	<hr />
	<input type="date" id="startDay" name="startDay" value="2020-03-05" />
	<input type="date" id="endDay" name="endDay" value="2020-03-10" />
	<br />
	<input type="checkbox" id="day-stNo1001" name="day-stNo" value="1001"> 여의도
	<input type="checkbox" id="day-stNo2001" name="day-stNo" value="2001"> 수원
	<input type="checkbox" id="day-stNo2002" name="day-stNo" value="2002"> 용인
	<br />
	<br />
	<button id="btn1">시간대별(일) 호출</button>
	<hr />
	<div id="info"></div>
	<hr />
	<div id="chart_div" class="chart-box"></div>
</body>
</html>