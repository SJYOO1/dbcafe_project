<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>쉽게 배우는 Thymeleaf 템플릿</title>
<link
	href="https://unpkg.com/bootstrap@5.2.1/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://unpkg.com/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/jquery@3.6.1/dist/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.0/axios.min.js"></script>
<style type="text/css">
div {
	margin: 5px;
	padding: 5px;
	border: 1px solid gray;
	height: 700px;
}
</style>
<script type="text/javascript">
	$(function() {
		$("#btn").click(function() {
			// 컨트롤러에 값 넘겨주기
			var startDay = $("input[name='startDay']").val();
			var endDay = $("input[name='endDay']").val();
			// 서버와 비동기 통신
			$.ajax({
				url : "/category",
				contentType : "application/json;charset=utf-8",
				dataType : "json",
				type : "get",
				data : {
					startDay : startDay,
					endDay : endDay
				},
				success : function(cdata) {
					$("#info").empty();
					$.each(cdata, function(index, item) {
						$("#info").append(index + 1 + ". ");
						$("#info").append(item.category + " : ");
						$("#info").append(item.csum + "원</br>");
						$("#info").append(index + 1 + ". ");
						$("#info").append(item.category + " : ");
						$("#info").append(item.ccount + "건</br>");
					});
				},
				error : function(data) {
					alert("Error");
				}
			});
		});
	});
</script>
</head>
<body>
	<button id="btn">제출</button>
	<hr />
	<input type="date" id="startDay" name="startDay" value="2020-03-05" />
	<input type="date" id="endDay" name="endDay" value="2020-03-10" />
	<hr />
	<div id="info"></div>
</body>
</html>
